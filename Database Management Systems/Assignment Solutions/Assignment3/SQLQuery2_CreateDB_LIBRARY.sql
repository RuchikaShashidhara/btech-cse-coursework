-- Microsoft SQL Script to Create the LIBRARY: Database and Database Objects

-- Creating Database Schema
DROP DATABASE IF EXISTS LIBRARY;
CREATE DATABASE LIBRARY;

USE LIBRARY;

-- Creating Tables
DROP TABLE IF EXISTS PUBLISHER;
CREATE TABLE PUBLISHER ( 
Name VARCHAR(20) NOT NULL,
Address VARCHAR(40) NOT NULL,
Phone CHAR(12),
PRIMARY KEY (Name)
);

DROP TABLE IF EXISTS BOOK;
CREATE TABLE BOOK ( 
Book_id CHAR(20) NOT NULL,
Title VARCHAR(30) NOT NULL,
Publisher_name VARCHAR(20),
PRIMARY KEY (Book_id),
FOREIGN KEY (Publisher_name) REFERENCES PUBLISHER (Name) ON UPDATE CASCADE 
);

DROP TABLE IF EXISTS BOOK_AUTHORS;
CREATE TABLE BOOK_AUTHORS ( 
Book_id CHAR(20) NOT NULL,
Author_name VARCHAR(30) NOT NULL,
PRIMARY KEY (Book_id, Author_name),
FOREIGN KEY (Book_id) REFERENCES BOOK (Book_id) ON DELETE CASCADE ON UPDATE CASCADE 
);

DROP TABLE IF EXISTS LIBRARY_BRANCH;
CREATE TABLE LIBRARY_BRANCH ( 
Branch_id INTEGER NOT NULL,
Branch_name VARCHAR(20) NOT NULL,
Address VARCHAR(40) NOT NULL,
PRIMARY KEY (Branch_id) 
);

DROP TABLE IF EXISTS BOOK_COPIES;
CREATE TABLE BOOK_COPIES ( 
Book_id CHAR(20) NOT NULL,
Branch_id INTEGER NOT NULL,
No_of_copies INTEGER NOT NULL,
PRIMARY KEY (Book_id, Branch_id),
FOREIGN KEY (Book_id) REFERENCES BOOK (Book_id) ON DELETE CASCADE ON UPDATE CASCADE,
FOREIGN KEY (Branch_id) REFERENCES LIBRARY_BRANCH (Branch_id) ON DELETE CASCADE ON UPDATE CASCADE 
);

DROP TABLE IF EXISTS BORROWER;
CREATE TABLE BORROWER ( 
Card_no INTEGER NOT NULL,
Name VARCHAR(30) NOT NULL,
Address VARCHAR(40) NOT NULL,
Phone CHAR(12),
PRIMARY KEY (Card_no) 
);

DROP TABLE IF EXISTS BOOK_LOANS;
CREATE TABLE BOOK_LOANS ( 
Card_no INTEGER NOT NULL,
Book_id CHAR(20) NOT NULL,
Branch_id INTEGER NOT NULL,
Date_out DATE NOT NULL,
Due_date DATE NOT NULL,
PRIMARY KEY (Card_no, Book_id, Branch_id),
FOREIGN KEY (Card_no) REFERENCES BORROWER (Card_no) ON DELETE CASCADE ON UPDATE CASCADE,
FOREIGN KEY (Branch_id) REFERENCES LIBRARY_BRANCH (Branch_id) ON DELETE CASCADE ON UPDATE CASCADE,
FOREIGN KEY (Book_id) REFERENCES BOOK (Book_id) ON DELETE CASCADE ON UPDATE CASCADE 
);

-- Inserting values inside the Tables
INSERT INTO PUBLISHER VALUES ( 'Penguin Random', '27 Martin Lane NY 92359', '9176917622');
INSERT INTO PUBLISHER VALUES ( 'Harper Collins', '127 Joanne Beach Lane CA 92359', '8976917622');
INSERT INTO PUBLISHER VALUES ( 'Mac Millan', '56 Ashford Drive VA 92359', '9176917090');
INSERT INTO PUBLISHER VALUES ( 'Simon Schuster', '73 Mill Road TX 92359', '9145677622');
INSERT INTO PUBLISHER VALUES ( 'McGraw Hill', '148 Bakersfield Lane CA 92359', '9176123422');
INSERT INTO PUBLISHER VALUES ( 'Mifflin Harcourt', '257 Poco Mas Drive TX 92359', '6789017622');
INSERT INTO PUBLISHER VALUES ( 'Klett Ed', '89 Abia Martin Drive MD 92359', '9080794455');
INSERT INTO PUBLISHER VALUES ( 'John Wiley', '912 Finwood Road NC 92359', '8765457699');
INSERT INTO PUBLISHER VALUES ( 'Red Egmont', '86 Roosevelt Lane WA 92359', '9864569922');

INSERT INTO BOOK VALUES ('001004', 'The Myth of Sisyphus', 'Penguin Random');
INSERT INTO BOOK VALUES ('001006', 'The Plague ', 'Harper Collins');
INSERT INTO BOOK VALUES ('001008', 'The Armageddon Inheritance', 'Simon Schuster');
INSERT INTO BOOK VALUES ('001009', 'Garden of Scandal', 'Harper Collins');
INSERT INTO BOOK VALUES ('002001', 'A Touch of Spring', 'McGraw Hill');
INSERT INTO BOOK VALUES ('002002', 'Oracle Night', 'Mifflin Harcourt');
INSERT INTO BOOK VALUES ('002003', 'Jacobs Room', 'Klett Ed');
INSERT INTO BOOK VALUES ('002004', 'Moon Palace', 'John Wiley');
INSERT INTO BOOK VALUES ('002005', 'Instant Mommy', 'Klett Ed');
INSERT INTO BOOK VALUES ('002006', 'The Magic Compass', 'Simon Schuster');
INSERT INTO BOOK VALUES ('002007', 'Emergence', 'John Wiley');
INSERT INTO BOOK VALUES ('002008', 'Rainbow Road', 'Penguin Random');
INSERT INTO BOOK VALUES ('002009', 'Everything Bad is Good for You', 'Red Egmont');
INSERT INTO BOOK VALUES ('003001', 'The Kings Persons', 'Penguin Random');
INSERT INTO BOOK VALUES ('003002', 'In Enemy Hands ', 'Red Egmont');
INSERT INTO BOOK VALUES ('003003', 'Daddy''s Angel ', 'Harper Collins');
INSERT INTO BOOK VALUES ('003004', 'How Firm a Foundation', 'Mac Millan');
INSERT INTO BOOK VALUES ('003005', 'Simple Gifts', 'Simon Schuster');
INSERT INTO BOOK VALUES ('003006', 'Drinker of Souls', 'Penguin Random');
INSERT INTO BOOK VALUES ('003007', 'Challenge To Honor', 'Mac Millan');
INSERT INTO BOOK VALUES ('003008', 'The Stranger', 'Simon Schuster');
INSERT INTO BOOK VALUES ('004001', 'Look Back in Anger ', 'Mac Millan');
INSERT INTO BOOK VALUES ('004002', 'Discovering Turkey', 'Simon Schuster');
INSERT INTO BOOK VALUES ('004003', 'Getting It', 'Harper Collins');
INSERT INTO BOOK VALUES ('004004', 'Watch it Come Down', 'Simon Schuster');
INSERT INTO BOOK VALUES ('004005', 'Kleptomania', 'Harper Collins');
INSERT INTO BOOK VALUES ('004006', 'The God Box', 'McGraw Hill');

INSERT INTO BOOK_AUTHORS VALUES ('001004', 'Scott Fitzgerald');
INSERT INTO BOOK_AUTHORS VALUES ('001006', 'Scott Fitzgerald');
INSERT INTO BOOK_AUTHORS VALUES ('001008', 'Ray Bradburry');
INSERT INTO BOOK_AUTHORS VALUES ('002001', 'Truman Capote');
INSERT INTO BOOK_AUTHORS VALUES ('002002', 'Mark Twain');
INSERT INTO BOOK_AUTHORS VALUES ('002003', 'Scott Fitzgerald');
INSERT INTO BOOK_AUTHORS VALUES ('002004', 'Mark Twain');
INSERT INTO BOOK_AUTHORS VALUES ('002005', 'Truman Capote');
INSERT INTO BOOK_AUTHORS VALUES ('002006', 'Truman Capote');
INSERT INTO BOOK_AUTHORS VALUES ('002007', 'Ray Bradburry');
INSERT INTO BOOK_AUTHORS VALUES ('002008', 'John Steinbeck');
INSERT INTO BOOK_AUTHORS VALUES ('002009', 'Ray Bradburry');
INSERT INTO BOOK_AUTHORS VALUES ('003001', 'John Steinbeck');
INSERT INTO BOOK_AUTHORS VALUES ('003002', 'Ray Bradburry');
INSERT INTO BOOK_AUTHORS VALUES ('003003', 'Truman Capote');
INSERT INTO BOOK_AUTHORS VALUES ('003004', 'Ray Bradburry');
INSERT INTO BOOK_AUTHORS VALUES ('003005', 'John Steinbeck');
INSERT INTO BOOK_AUTHORS VALUES ('003006', 'Mark Twain');
INSERT INTO BOOK_AUTHORS VALUES ('003007', 'Harper Lee');
INSERT INTO BOOK_AUTHORS VALUES ('003008', 'Scott Fitzgerald');
INSERT INTO BOOK_AUTHORS VALUES ('004001', 'Alice Walker');
INSERT INTO BOOK_AUTHORS VALUES ('004002', 'Harper Lee');
INSERT INTO BOOK_AUTHORS VALUES ('004003', 'John Steinbeck');
INSERT INTO BOOK_AUTHORS VALUES ('004004', 'Alice Walker');
INSERT INTO BOOK_AUTHORS VALUES ('004005', 'Alice Walker');
INSERT INTO BOOK_AUTHORS VALUES ('004006', 'John Steinbeck');

INSERT INTO LIBRARY_BRANCH VALUES (1, 'Miller', 'Downtown');
INSERT INTO LIBRARY_BRANCH VALUES (2, 'Domino', 'Mid West');
INSERT INTO LIBRARY_BRANCH VALUES (3, 'Grease', 'Upper East');
INSERT INTO LIBRARY_BRANCH VALUES (4, 'Helmet', 'Upper West');
INSERT INTO LIBRARY_BRANCH VALUES (5, 'Circle', 'Midtown');
INSERT INTO LIBRARY_BRANCH VALUES (6, 'Ted''s', 'Gramercy');
INSERT INTO LIBRARY_BRANCH VALUES (7, 'Kramer', 'Kips Bay');
INSERT INTO LIBRARY_BRANCH VALUES (8, 'Joyce', 'Murray Hill');
INSERT INTO LIBRARY_BRANCH VALUES (9, 'Gyoza', 'Chinatown');
INSERT INTO LIBRARY_BRANCH VALUES (10, 'Kimchi', 'KTown');
INSERT INTO LIBRARY_BRANCH VALUES (11, 'Wall', 'Financial District');
INSERT INTO LIBRARY_BRANCH VALUES (12, 'Battery', 'Battery Park');
INSERT INTO LIBRARY_BRANCH VALUES (13, 'Shake', 'Harlem');
INSERT INTO LIBRARY_BRANCH VALUES (14, 'Eataly', 'East Willage');
INSERT INTO LIBRARY_BRANCH VALUES (15, 'Lobster Tail', 'Chelsea');
INSERT INTO LIBRARY_BRANCH VALUES (16, 'Dumbo', 'Brooklyn');
INSERT INTO LIBRARY_BRANCH VALUES (17, 'Park Slope', 'Brooklyn');
INSERT INTO LIBRARY_BRANCH VALUES (18, 'Sunny', 'Queens');
INSERT INTO LIBRARY_BRANCH VALUES (19, 'Wood', 'Queens');
INSERT INTO LIBRARY_BRANCH VALUES (20, 'Island', 'Roosevelt');
INSERT INTO LIBRARY_BRANCH VALUES (21, 'Brooklyn College', 'Brooklyn');

INSERT INTO BOOK_COPIES VALUES ('002001', 1, 1);
INSERT INTO BOOK_COPIES VALUES ('002004', 1, 1);
INSERT INTO BOOK_COPIES VALUES ('003006', 1, 3);
INSERT INTO BOOK_COPIES VALUES ('002006', 2, 1);
INSERT INTO BOOK_COPIES VALUES ('003003', 2, 1);
INSERT INTO BOOK_COPIES VALUES ('003007', 2, 1);
INSERT INTO BOOK_COPIES VALUES ('001009', 3, 1);
INSERT INTO BOOK_COPIES VALUES ('002003', 3, 1);
INSERT INTO BOOK_COPIES VALUES ('003003', 3, 1);
INSERT INTO BOOK_COPIES VALUES ('003003', 4, 1);
INSERT INTO BOOK_COPIES VALUES ('003008', 4, 2);
INSERT INTO BOOK_COPIES VALUES ('004006', 4, 1);
INSERT INTO BOOK_COPIES VALUES ('002003', 5, 2);
INSERT INTO BOOK_COPIES VALUES ('003002', 5, 1);
INSERT INTO BOOK_COPIES VALUES ('003003', 5, 1);
INSERT INTO BOOK_COPIES VALUES ('004006', 5, 1);
INSERT INTO BOOK_COPIES VALUES ('001004', 6, 1);
INSERT INTO BOOK_COPIES VALUES ('002006', 6, 1);
INSERT INTO BOOK_COPIES VALUES ('003005', 6, 1);
INSERT INTO BOOK_COPIES VALUES ('004006', 6, 1);
INSERT INTO BOOK_COPIES VALUES ('001008', 7, 1);
INSERT INTO BOOK_COPIES VALUES ('001008', 8, 2);
INSERT INTO BOOK_COPIES VALUES ('001009', 8, 1);
INSERT INTO BOOK_COPIES VALUES ('002006', 8, 1);
INSERT INTO BOOK_COPIES VALUES ('003007', 8, 1);
INSERT INTO BOOK_COPIES VALUES ('004006', 8, 2);
INSERT INTO BOOK_COPIES VALUES ('004002', 9, 3);
INSERT INTO BOOK_COPIES VALUES ('004005', 9, 3);
INSERT INTO BOOK_COPIES VALUES ('001006', 10, 2);
INSERT INTO BOOK_COPIES VALUES ('004004', 10, 2);
INSERT INTO BOOK_COPIES VALUES ('002006', 11, 1);
INSERT INTO BOOK_COPIES VALUES ('003005', 11, 1);
INSERT INTO BOOK_COPIES VALUES ('004003', 11, 1);
INSERT INTO BOOK_COPIES VALUES ('004005', 11, 1);
INSERT INTO BOOK_COPIES VALUES ('002004', 11, 1);
INSERT INTO BOOK_COPIES VALUES ('003002', 12, 3);
INSERT INTO BOOK_COPIES VALUES ('003004', 12, 3);
INSERT INTO BOOK_COPIES VALUES ('004002', 12, 3);
INSERT INTO BOOK_COPIES VALUES ('004006', 12, 1);
INSERT INTO BOOK_COPIES VALUES ('001008', 13, 1);
INSERT INTO BOOK_COPIES VALUES ('002001', 13, 1);
INSERT INTO BOOK_COPIES VALUES ('002003', 13, 1);
INSERT INTO BOOK_COPIES VALUES ('002006', 13, 2);
INSERT INTO BOOK_COPIES VALUES ('003007', 13, 1);
INSERT INTO BOOK_COPIES VALUES ('002002', 15, 1);
INSERT INTO BOOK_COPIES VALUES ('003003', 15, 1);
INSERT INTO BOOK_COPIES VALUES ('003005', 16, 2);
INSERT INTO BOOK_COPIES VALUES ('004003', 16, 1);
INSERT INTO BOOK_COPIES VALUES ('004003', 17, 1);
INSERT INTO BOOK_COPIES VALUES ('002007', 18, 1);
INSERT INTO BOOK_COPIES VALUES ('004001', 18, 8);
INSERT INTO BOOK_COPIES VALUES ('004003', 18, 1);
INSERT INTO BOOK_COPIES VALUES ('001008', 19, 1);
INSERT INTO BOOK_COPIES VALUES ('002001', 19, 3);
INSERT INTO BOOK_COPIES VALUES ('002005', 19, 1);
INSERT INTO BOOK_COPIES VALUES ('002007', 19, 1);
INSERT INTO BOOK_COPIES VALUES ('002004', 20, 1);
INSERT INTO BOOK_COPIES VALUES ('002009', 20, 4);
INSERT INTO BOOK_COPIES VALUES ('003006', 21, 1);
INSERT INTO BOOK_COPIES VALUES ('002003', 21, 1);
INSERT INTO BOOK_COPIES VALUES ('002008', 21, 1);

INSERT INTO BORROWER VALUES (42520, 'Julia J. Casias', '2795 Peck Court Laguna Beach CA 92651', '9176841143');
INSERT INTO BORROWER VALUES (42521, 'Ralph D. Height', '2827 Joanne Lane Worcester MA 01610', '9176841142');
INSERT INTO BORROWER VALUES (42522, 'John P. Kemp', '2285 Frosty Lane Syracuse NY 13204', '9176841144');
INSERT INTO BORROWER VALUES (42524, 'Charles L. Painter', '4429 Golf Course Drive Manassas VA 22110', '9176841147');
INSERT INTO BORROWER VALUES (42525, 'John V. Turner', '5 Deans Lane Elmsford NY 10523', '9176841146');
INSERT INTO BORROWER VALUES (42526, 'Norma B. Cole', '2993 Drainer Avenue Tallahassee FL 32301', '9176841150');
INSERT INTO BORROWER VALUES (42527, 'Dawne C. Willett', '4462 James Street Rochester NY 14611', '9176841148');
INSERT INTO BORROWER VALUES (42528, 'Samuel H. Abernathy', '2117 Adams Drive Sugar Land TX 77478', '9176841149');
INSERT INTO BORROWER VALUES (42529, 'Eric T. Miskell', '3248 Kimberly Way Kentwood MI 49512', '9176841151');
INSERT INTO BORROWER VALUES (49511, 'Rudolf S. Campbell', '475 New Street Bend OR 97701', '9176841128');
INSERT INTO BORROWER VALUES (49519, 'Lillie C. Clayton', '2280 Coburn Hollow Road Peoria IL 61602', '9176841129');
INSERT INTO BORROWER VALUES (49810, 'Duane B. Reyes', '4786 Jerome Avenue Edinburg TX 78539', '9176841125');
INSERT INTO BORROWER VALUES (49811, 'Juan R. Tyler', '978 Lyndon Street Philadelphia PA 19103', '9176841127');
INSERT INTO BORROWER VALUES (49812, 'Glenn B. Christ', '3035 Todds Lane San Antonio TX 78225', '9176841126');
INSERT INTO BORROWER VALUES (49813, 'Marcus J. Pepe', '880 Long Street Ocala FL 34471', '9176841124');
INSERT INTO BORROWER VALUES (52010, 'Marcia W. Willis', '1751 Millbrook Road Wood Dale IL 60191', '9176841195');
INSERT INTO BORROWER VALUES (52011, 'Paula E. Ridenour', '4441 Armbrester Drive San Pedro CA 90731', '9176841196');
INSERT INTO BORROWER VALUES (52012, 'Bailey D. Eubanks', '1619 Mount Tabor New York NY 10007', '9176841197');
INSERT INTO BORROWER VALUES (52014, 'Vernon G. Muller', '243 Walkers Ridge Way Lombard IL 60148', '9176841199');
INSERT INTO BORROWER VALUES (52015, 'Shannon E. Stewart', '1436 Cedar Lane Brighton MA 02135', '9176841100');
INSERT INTO BORROWER VALUES (52016, 'Regina W. Cayer', '4502 Drainer Avenue Destin FL 32541', '9176841101');
INSERT INTO BORROWER VALUES (52017, 'James A. Testerman', '3786 Alexander Drive Denton TX 76201', '9176841102');
INSERT INTO BORROWER VALUES (52018, 'Helen R. Mosier', '1521 Bee Street Muskegon MI 49470', '9176841103');
INSERT INTO BORROWER VALUES (52019, 'Darin B. Mayes', '2783 Oakdale Avenue Lakeland FL 33801', '9176841104');
INSERT INTO BORROWER VALUES (52025, 'Vivian W. Reimer', '1365 Jail Drive Galva IL 61434', '9176841106');
INSERT INTO BORROWER VALUES (52028, 'Hosea T. Roberts', '2910 Emma Street Wolfforth TX 79382', '9176841109');
INSERT INTO BORROWER VALUES (52029, 'Gloria L. Beckett', '4128 Cliffside Drive Syracuse NY 13202', '9176841110');
INSERT INTO BORROWER VALUES (52521, 'Colleen B. England', '1224 Finwood Road New Brunswick NJ 08901', '9176841160');
INSERT INTO BORROWER VALUES (52522, 'Bruce M. Medina', '4894 Stadium Drive Needham MA 02192', '9176841155');
INSERT INTO BORROWER VALUES (52524, 'Bessie J. Ison', '492 Upland Avenue Toledo OH 43615', '9176841153');
INSERT INTO BORROWER VALUES (52525, 'Pamela H. Buchanan', '1936 Wilkinson Court Fort Myers FL 33901', '9176841152');
INSERT INTO BORROWER VALUES (52526, 'Louie D. Byers', '4095 Finwood Road Branchburg NJ 08876', '9176841156');
INSERT INTO BORROWER VALUES (52527, 'Richard E. Agustin', '3666 Levy Court Dracut MA 01826', '9176841157');
INSERT INTO BORROWER VALUES (52528, 'Martin M. Arndt', '947 Strother Street Birmingham AL 35222', '9176841158');
INSERT INTO BORROWER VALUES (52529, 'Casey N. Martin', '369 Johnstown Road Northbrook IL 60062', '9176841159');
INSERT INTO BORROWER VALUES (59813, 'Katherine O. Butts', '2061 Ray Court Fayetteville NC 28305', '9176841123');

INSERT INTO BOOK_LOANS VALUES (52025, '001006', 10, '2020-02-26', '2020-03-06');	--OD
INSERT INTO BOOK_LOANS VALUES (52028, '001008', 19, '2020-02-28', '2020-03-07');	--OD
INSERT INTO BOOK_LOANS VALUES (52029, '001009', 8, '2020-01-24', '2020-01-29');		--OD
INSERT INTO BOOK_LOANS VALUES (52028, '001009', 8, '2020-03-02', '2020-04-25');
INSERT INTO BOOK_LOANS VALUES (52521, '001009', 8, '2020-03-16', '2020-04-23');
INSERT INTO BOOK_LOANS VALUES (59813, '002009', 8, '2020-01-28', '2020-02-24');		--OD
INSERT INTO BOOK_LOANS VALUES (52025, '001009', 3, '2020-02-13', '2020-03-29');
INSERT INTO BOOK_LOANS VALUES (52025, '002003', 5, '2020-02-11', '2020-03-11');		--OD
INSERT INTO BOOK_LOANS VALUES (52524, '002003', 5, '2020-02-19', '2020-04-03');
INSERT INTO BOOK_LOANS VALUES (52526, '002007', 21, '2020-03-03', '2020-03-12');    --OD
INSERT INTO BOOK_LOANS VALUES (52012, '002004', 3, '2020-01-24', '2020-02-23');		--OD
INSERT INTO BOOK_LOANS VALUES (52522, '002004', 7, '2020-03-03', '2020-04-01');
INSERT INTO BOOK_LOANS VALUES (52014, '002006', 8, '2020-01-24', '2020-02-22');		--OD
INSERT INTO BOOK_LOANS VALUES (52019, '003005', 16, '2020-01-24', '2020-01-29');	--OD



